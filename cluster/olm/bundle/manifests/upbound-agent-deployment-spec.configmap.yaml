# Generated by https://github.com/upbound/olm-bundle
apiVersion: v1
data:
  spec.yaml: "replicas: 1\nselector:\n  matchLabels:\n    app.kubernetes.io/name: crossplane\n    app.kubernetes.io/instance: universal-crossplane\n    app.kubernetes.io/component: agent\ntemplate:\n  metadata:\n    labels:\n      app.kubernetes.io/name: crossplane\n      app.kubernetes.io/instance: universal-crossplane\n      app.kubernetes.io/component: agent\n  spec:\n    serviceAccountName: upbound-agent\n    imagePullSecrets:\n    - name: dockerhub\n    \n    containers:\n      - name: agent\n        image: \"upbound/upbound-agent:v1.3.0-up.1.rc.1.28.gb6821fb\"\n        args:\n        - agent\n        - --tls-cert-file\n        - /etc/certs/upbound-agent/tls.crt\n        - --tls-key-file\n        - /etc/certs/upbound-agent/tls.key\n        - --xgql-ca-bundle-file\n        - /etc/certs/upbound-agent/ca.crt\n        - --nats-endpoint\n        - nats://connect.upbound.io:443\n        - --upbound-api-endpoint\n        - https://api.upbound.io\n        - --pod-name\n        - $(POD_NAME)\n        - --control-plane-token\n        - $(CP_TOKEN)\n        env:\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n        - name: CP_TOKEN\n          valueFrom:\n            secretKeyRef:\n              name: upbound-control-plane-token\n              key: token\n        imagePullPolicy: IfNotPresent\n        ports:\n        - name: agent\n          containerPort: 6443\n          protocol: TCP\n        resources:\n          {}\n        readinessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /readyz\n            port: 6443\n          initialDelaySeconds: 5\n          timeoutSeconds: 5\n          periodSeconds: 5\n          failureThreshold: 3\n        livenessProbe:\n          httpGet:\n            scheme: HTTPS\n            path: /livez\n            port: 6443\n          initialDelaySeconds: 10\n          timeoutSeconds: 5\n          periodSeconds: 30\n          failureThreshold: 5\n        volumeMounts:\n          - mountPath: /etc/certs/upbound-agent\n            name: certs\n            readOnly: true\n    volumes:\n      - name: certs\n        secret:\n          defaultMode: 420\n          secretName: upbound-agent-tls"
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/component: agent
    app.kubernetes.io/instance: universal-crossplane
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: crossplane
    app.kubernetes.io/version: 0.0.1
    helm.sh/chart: universal-crossplane-0.0.1
  name: upbound-agent-deployment-spec
